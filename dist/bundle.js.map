{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://PDFFile/webpack/universalModuleDefinition","webpack://PDFFile/./src/index.js","webpack://PDFFile/webpack/bootstrap","webpack://PDFFile/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFFile\"] = factory();\n\telse\n\t\troot[\"PDFFile\"] = factory();\n})(self, function() {\nreturn ","class PDFFile {\n    static get toolbox() {\n        return {\n            title: 'PDF',\n            icon: '<svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M21.75 18.75V3.25H8.983V9h-4.5V21.75h14.25v-3zm-2.25 2.25H10.483V10.5h9V21zm-5.25-5.25V13.5h2.25v2.25h2.25v2.25h-4.5zM5.983 8.5h2.25V6.25h-2.25v2.25zm4.5 10.5v-3h4.5v3h-4.5z\" fill=\"currentColor\"/></svg>'\n        };\n    }\n\n    constructor({ data = {}, config, wrapper }) {\n        this.data = data;\n        this.config = config;\n        this.wrapper = wrapper;\n    }\n\n    render() {\n        this.wrapper = document.createElement('div');\n        this.wrapper.addEventListener('dragover', this.handleDragOver.bind(this));\n        this.wrapper.addEventListener('drop', this.handleInputChange.bind(this));\n        this.wrapper.addEventListener('paste', this.handlePaste.bind(this));\n\n        if (this.data && this.data.url) {\n            const objectElement = this.createPDFObjectElement(this.data.url);\n            this.wrapper.innerHTML = '';\n            this.wrapper.appendChild(objectElement);\n        } else {\n            const input = document.createElement('input');\n            input.setAttribute('type', 'file');\n            input.setAttribute('accept', 'application/pdf');\n            input.addEventListener('input', this.handleInputChange.bind(this));\n            this.wrapper.appendChild(input);\n        }\n\n        return this.wrapper;\n    }\n\n    handlePaste(event) {\n        const items = (event.clipboardData || event.originalEvent.clipboardData).items;\n        const fileItem = Array.from(items).find(item => item.kind === 'file' && item.type === 'application/pdf');\n        if (!fileItem) {\n            return;\n        }\n        const file = fileItem.getAsFile();\n        this.uploadFile(file);\n    }\n\n    handleDragOver(event) {\n        event.preventDefault();\n    }\n\n    handleInputChange(event) {\n        const file = event.target.files[0];\n        if (!file) {\n            return;\n        }\n        this.uploadFile(file);\n    }\n\n    async uploadFile(file) {\n        const formData = new FormData();\n        formData.append('file', file);\n        try {\n            const response = await fetch(this.config.uploadEndpoint, {\n                method: 'POST',\n                body: formData\n            });\n            if (response.ok) {\n                const data = await response.json();\n                this.data = {\n                    url: data.file.url\n                };\n                const objectElement = this.createPDFObjectElement(data.file.url);\n                this.wrapper.innerHTML = '';\n                this.wrapper.appendChild(objectElement);\n            } else {\n                throw new Error('La carga del archivo ha fallado.');\n            }\n        } catch (error) {\n            console.error(error);\n            alert('No se pudo cargar el archivo PDF.');\n            this.wrapper.innerHTML = '';\n        }\n    }\n\n    createPDFObjectElement(url) {\n        const objectElement = document.createElement('object');\n        objectElement.setAttribute('data', url + '#toolbar=0');\n        objectElement.setAttribute('type', 'application/pdf');\n        objectElement.setAttribute('width', '100%');\n        objectElement.setAttribute('height', '600px');\n        const pElement = document.createElement('p');\n        pElement.innerText = 'Este navegador no soporta mostrar archivos PDF. : ';\n        const aElement = document.createElement('a');\n        aElement.setAttribute('href', url + '#pagemode=none&toolbar=0&statusbar=0&messages=0&navpanes=0');\n        aElement.innerText = 'Descárgalo para poder verlo.';\n        pElement.appendChild(aElement);\n        objectElement.appendChild(pElement);\n        return objectElement;\n    }\n\n\n    save() {\n        return this.data;\n    }\n\n    validate(savedData) {\n        const url = savedData && savedData.url;\n\n        // Si la URL es undefined o un string vacío, los datos no son válidos\n        if (url === undefined || url === '') {\n            return false;\n        }\n\n        // Si hay una URL, comprobamos que sea válida\n        const urlPattern = /^(https?):\\/\\/[^\\s/$.?#].[^\\s]*$/i;\n        return urlPattern.test(url);\n    }\n\n    static get isReadOnlySupported() {\n        return true;\n    }\n}\n\nmodule.exports = PDFFile;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(966);\n"],"names":["root","factory","exports","module","define","amd","self","PDFFile","data","config","wrapper","this","document","createElement","addEventListener","handleDragOver","bind","handleInputChange","handlePaste","url","objectElement","createPDFObjectElement","innerHTML","appendChild","input","setAttribute","event","items","clipboardData","originalEvent","fileItem","Array","from","find","item","kind","type","file","getAsFile","uploadFile","preventDefault","target","files","formData","FormData","append","fetch","uploadEndpoint","method","body","response","ok","json","Error","console","error","alert","pElement","innerText","aElement","savedData","undefined","test","title","icon","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}